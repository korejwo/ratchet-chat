<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ratchet demo</title>
</head>
<body>
<script type="text/javascript">
    function connectPHP (host) {
        console.log('host', host);
        const conn = new WebSocket(host);
        console.log('conn', conn);
        conn.onmessage = (e) => {
            console.log('onmessage', e);
        }
        conn.onopen = (e) => {
            console.log('onopen', e);
            conn.send('test');
            setTimeout(() => {
                conn.close();
            }, 1000);
        }
        conn.onclose = (e) => {
            console.log('onclose', e);
        }
    }

    connectPHP('ws://' + window.location.host + ':8080');
</script>
</body>
</html>
